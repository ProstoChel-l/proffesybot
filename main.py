import telebot
from telebot import types
from user_state import UserState
token = "7510604267:AAHg8UpYVHz6uZxgwZG8NGMuFmp1O5ikJiE"

bot = telebot.TeleBot(token)

test = [
    """
    ‚Ññ1 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –£—Ö–∞–∂–∏–≤–∞—Ç—å –∑–∞ –∂–∏–≤–æ—Ç–Ω—ã–º–∏
    –±) –û–±—Å–ª—É–∂–∏–≤–∞—Ç—å –º–∞—à–∏–Ω—ã, –ø—Ä–∏–±–æ—Ä—ã""",
    """
    ‚Ññ2 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –ü–æ–º–æ–≥–∞—Ç—å –±–æ–ª—å–Ω—ã–º –ª—é–¥—è–º
    –±) –°–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–∞–±–ª–∏—Ü—ã, —Å—Ö–µ–º—ã, –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω """,
    """
    ‚Ññ3 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –°–ª–µ–¥–∏—Ç—å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ–º –∫–Ω–∏–∂–Ω—ã—Ö –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π, –ø–ª–∞–∫–∞—Ç–æ–≤, —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç–æ–∫
    –±) –°–ª–µ–¥–∏—Ç—å –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, —Ä–∞–∑–≤–∏—Ç–∏–µ–º –∫–æ–º–Ω–∞—Ç–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π""",
    """
    ‚Ññ4 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–¥–µ—Ä–µ–≤–æ, —Ç–∫–∞–Ω—å, –º–µ—Ç–∞–ª–ª, –ø–ª–∞—Å—Ç–º–∞—Å—Å—É)
    –±) –î–æ–≤–æ–¥–∏—Ç—å —Ç–æ–≤–∞—Ä—ã –¥–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è (—Ä–µ–∫–ª–∞–º–∏—Ä–æ–≤–∞—Ç—å, –ø—Ä–æ–¥–∞–≤–∞—Ç—å)""",
    """
    ‚Ññ5 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –û–±—Å—É–∂–¥–∞—Ç—å –Ω–∞—É—á–Ω–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏,  —Å—Ç–∞—Ç—å–∏
    –±) –û–±—Å—É–∂–¥–∞—Ç—å —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏""",
    """
    ‚Ññ6 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –í—ã—Ä–∞—â–∏–≤–∞—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö –∫–∞–∫–æ–π-–ª–∏–±–æ –ø–æ—Ä–æ–¥—ã
    –±) –¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä–∏—â–µ–π (–∏–ª–∏ –º–ª–∞–¥—à–∏—Ö) –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –¥–µ–π—Å—Ç–≤–∏–π""",
    """
    ‚Ññ7 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å—É–Ω–∫–∏, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    –±) –£–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞–∫–∏–º-–ª–∏–±–æ –≥—Ä—É–∑–æ–≤—ã–º, –ø–æ–¥—ä—ë–º–Ω—ã–º, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º —Å—Ä–µ–¥—Å—Ç–≤–æ–º (–ø–æ–¥—ä—ë–º–Ω—ã–º –∫—Ä–∞–Ω–æ–º, –º–∞—à–∏–Ω–æ–π –∏ —Ç.–ø.)""",
    """
    ‚Ññ8 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –°–æ–æ–±—â–∞—Ç—å, —Ä–∞–∑—ä—è—Å–Ω—è—Ç—å –ª—é–¥—è–º –Ω—É–∂–Ω—ã–µ –¥–ª—è –Ω–∏—Ö —Å–≤–µ–¥–µ–Ω–∏—è –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–æ–º –±—é—Ä–æ, –≤–æ –≤—Ä–µ–º—è —ç–∫—Å–∫—É—Ä—Å–∏–∏ –∏ —Ç.–¥.
    –±) –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ñ–æ—Ä–º–ª—è—Ç—å –≤—ã—Å—Ç–∞–≤–∫–∏, –≤–∏—Ç—Ä–∏–Ω—ã, —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤, –ø—å–µ—Å –∏ —Ç.–ø.""",
    """
    ‚Ññ9 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –†–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–¥–µ–ª–∏—è, –≤–µ—â–∏ (–æ–¥–µ–∂–¥—É, —Ç–µ—Ö–Ω–∏–∫—É), –∂–∏–ª–∏—â–µ
    –±) –ò—Å–∫–∞—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏ –≤ —Ç–µ–∫—Å—Ç–∞—Ö, —Ç–∞–±–ª–∏—Ü–∞—Ö, —Ä–∏—Å—É–Ω–∫–∞—Ö""",
    """
    ‚Ññ10 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –õ–µ—á–∏—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö
    –±) –í—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞—Å—á—ë—Ç—ã, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è""",
    """
    ‚Ññ11 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –í—ã–≤–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ—Ä—Ç–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π
    –±) –ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–∏–¥—ã –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π (–º–∞—à–∏–Ω—ã, –æ–¥–µ–∂–¥—É, –¥–æ–º–∞ –∏ —Ç.–¥.)""",
    """
    ‚Ññ12 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –†–∞–∑–±–∏—Ä–∞—Ç—å —Å–ø–æ—Ä—ã, —Å—Å–æ—Ä—ã –º–µ–∂–¥—É –ª—é–¥—å–º–∏, —É–±–µ–∂–¥–∞—Ç—å, —Ä–∞–∑—ä—è—Å–Ω—è—Ç—å, –ø–æ–æ—â—Ä—è—Ç—å, –Ω–∞–∫–∞–∑—ã–≤–∞—Ç—å
    –±) –†–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —á–µ—Ä—Ç–µ–∂–∞—Ö, —Å—Ö–µ–º–∞—Ö, —Ç–∞–±–ª–∏—Ü–∞—Ö (–ø—Ä–æ–≤–µ—Ä—è—Ç—å, —É—Ç–æ—á–Ω—è—Ç—å, –ø—Ä–∏–≤–æ–¥–∏—Ç—å –≤ –ø–æ—Ä—è–¥–æ–∫)""",
    """
    ‚Ññ13 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –ù–∞–±–ª—é–¥–∞—Ç—å, –∏–∑—É—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –∫—Ä—É–∂–∫–æ–≤ —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∞–º–æ–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    –±) –ù–∞–±–ª—é–¥–∞—Ç—å, –∏–∑—É—á–∞—Ç—å –∂–∏–∑–Ω—å –º–∏–∫—Ä–æ–±–æ–≤""",
    """
    ‚Ññ14 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –û–±—Å–ª—É–∂–∏–≤–∞—Ç—å, –Ω–∞–ª–∞–∂–∏–≤–∞—Ç—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–∏–±–æ—Ä—ã –∏ –∞–ø–ø–∞—Ä–∞—Ç—ã
    –±) –û–∫–∞–∑—ã–≤–∞—Ç—å –ª—é–¥—è–º –º–µ–¥–∏—Ü–∏–Ω—Å–∫—É—é –ø–æ–º–æ—â—å –ø—Ä–∏ —Ä–∞–Ω–µ–Ω–∏—è—Ö, —É—à–∏–±–∞—Ö, –æ–∂–æ–≥–∞—Ö –∏ —Ç.–ø.""",
    """
    ‚Ññ15 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –°–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ—á–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è, –æ—Ç—á—ë—Ç—ã –æ –Ω–∞–±–ª—é–¥–∞–µ–º—ã—Ö —è–≤–ª–µ–Ω–∏—è—Ö, —Å–æ–±—ã—Ç–∏—è—Ö, –∏–∑–º–µ—Ä—è–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö –∏ –¥—Ä.
    –±) –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å, –∏–∑–æ–±—Ä–∞–∂–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –Ω–∞–±–ª—é–¥–∞–µ–º—ã–µ –∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ–º—ã–µ""",
    """
    ‚Ññ16 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –î–µ–ª–∞—Ç—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã –≤ –±–æ–ª—å–Ω–∏—Ü–µ
    –±) –ü—Ä–∏–Ω–∏–º–∞—Ç—å, –æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –±–æ–ª—å–Ω—ã—Ö, –±–µ—Å–µ–¥–æ–≤–∞—Ç—å —Å –Ω–∏–º–∏, –Ω–∞–∑–Ω–∞—á–∞—Ç—å –ª–µ—á–µ–Ω–∏–µ""",
    """
    ‚Ññ17 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –ö—Ä–∞—Å–∏—Ç—å –∏–ª–∏ —Ä–∞—Å–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ç–µ–Ω—ã –ø–æ–º–µ—â–µ–Ω–∏–π, –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∏–∑–¥–µ–ª–∏–π
    –±) –û—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –º–æ–Ω—Ç–∞–∂ –∑–¥–∞–Ω–∏—è –∏–ª–∏ —Å–±–æ—Ä–∫—É –º–∞—à–∏–Ω, –ø—Ä–∏–±–æ—Ä–æ–≤""",
    """
    ‚Ññ18 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –û—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫—É–ª—å—Ç –ø–æ—Ö–æ–¥—ã –ª—é–¥–µ–π –≤ —Ç–µ–∞—Ç—Ä—ã, –º—É–∑–µ–∏, –Ω–∞ —ç–∫—Å–∫—É—Ä—Å–∏–∏, –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏ —Ç.–ø.
    –±) –ò–≥—Ä–∞—Ç—å –Ω–∞ —Å—Ü–µ–Ω–µ, –ø—Ä–∏–Ω–∏–º–∞—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –∫–æ–Ω—Ü–µ—Ä—Ç–∞—Ö""",
    """
    ‚Ññ19 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –ò–∑–≥–æ—Ç–æ–≤–ª—è—Ç—å –ø–æ —á–µ—Ä—Ç–µ–∂–∞–º –¥–µ—Ç–∞–ª–∏, –∏–∑–¥–µ–ª–∏—è (–º–∞—à–∏–Ω—ã, –æ–¥–µ–∂–¥—É), —Å—Ç—Ä–æ–∏—Ç—å –∑–¥–∞–Ω–∏—è
    –±) –ó–∞–Ω–∏–º–∞—Ç—å—Å—è —á–µ—Ä—á–µ–Ω–∏–µ–º, –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—ã, —á–µ—Ä—Ç–µ–∂–∏""",
    """
    ‚Ññ20 –í—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏:
    –∞) –í–µ—Å—Ç–∏ –±–æ—Ä—å–±—É —Å –±–æ–ª–µ–∑–Ω—è–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π, —Å –≤—Ä–µ–¥–∏—Ç–µ–ª—è–º–∏ –ª–µ—Å–∞, —Å–∞–¥–∞
    –±) –†–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ"""
]
test_res = [
    """
    –ß–µ–ª–æ–≤–µ–∫ ‚Äî –ø—Ä–∏—Ä–æ–¥–∞. –°—é–¥–∞ –≤—Ö–æ–¥—è—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —á–µ–ª–æ–≤–µ–∫ –∏–º–µ–µ—Ç –¥–µ–ª–æ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —è–≤–ª–µ–Ω–∏—è–º–∏ –Ω–µ–∂–∏–≤–æ–π –∏ –∂–∏–≤–æ–π –ø—Ä–∏—Ä–æ–¥—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä –±–∏–æ–ª–æ–≥, –≥–µ–æ–≥—Ä–∞—Ñ, –≥–µ–æ–ª–æ–≥, –º–∞—Ç–µ–º–∞—Ç–∏–∫, —Ñ–∏–∑–∏–∫, —Ö–∏–º–∏–∫ –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ —Ä–∞–∑—Ä—è–¥—É –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–∞—É–∫.""",
    """
    –ß–µ–ª–æ–≤–µ–∫ ‚Äî —Ç–µ—Ö–Ω–∏–∫–∞. –í —ç—Ç—É –≥—Ä—É–ø–ø—É –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –≤–∫–ª—é—á–µ–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∏–¥—ã —Ç—Ä—É–¥–æ–≤–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —á–µ–ª–æ–≤–µ–∫  –∏–º–µ–µ—Ç –¥–µ–ª–æ —Å —Ç–µ—Ö–Ω–∏–∫–æ–π, –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–æ—Ñ–µ—Å—Å–∏—è –∏–Ω–∂–µ–Ω–µ—Ä–∞, –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, –º–∞—à–∏–Ω–∏—Å—Ç–∞, –º–µ—Ö–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞, —Å–≤–∞—Ä—â–∏–∫–∞ –∏ —Ç.–ø.""",
    """
    –ß–µ–ª–æ–≤–µ–∫ ‚Äî —á–µ–ª–æ–≤–µ–∫. –°—é–¥–∞ –≤–∫–ª—é—á–µ–Ω—ã –≤—Å–µ –≤–∏–¥—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–π, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—â–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ª—é–¥–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ–ª–∏—Ç–∏–∫–∞, —Ä–µ–ª–∏–≥–∏—è, –ø–µ–¥–∞–≥–æ–≥–∏–∫–∞, –ø—Å–∏—Ö–æ–ª–æ–≥–∏—è, –º–µ–¥–∏—Ü–∏–Ω–∞, —Ç–æ—Ä–≥–æ–≤–ª—è, –ø—Ä–∞–≤–æ.""",
    """
    –ß–µ–ª–æ–≤–µ–∫ ‚Äî –∑–Ω–∞–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞. –í —ç—Ç—É –≥—Ä—É–ø–ø—É –≤–∫–ª—é—á–µ–Ω—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, –∫–∞—Å–∞—é—â–∏–µ—Å—è —Å–æ–∑–¥–∞–Ω–∏—è, –∏–∑—É—á–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä –ª–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞, —è–∑—ã–∫–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–ø–æ—Å–æ–±—ã –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π –∏ —Ç.–ø.""",
    """
    –ß–µ–ª–æ–≤–µ–∫ ‚Äî —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑. –≠—Ç–∞ –≥—Ä—É–ø–ø–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∏–¥—ã —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ-—Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ —Ç—Ä—É–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞, –º—É–∑—ã–∫–∞, —Ç–µ–∞—Ç—Ä, –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ."""
]

CATEGORY_MAX = 8
cache = {}

@bot.message_handler(commands=['start'])
def start(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    bot.send_message(message.from_user.id, "üëã –ü—Ä–∏–≤–µ—Ç! –û—Ç–≤–µ—Ç–∏–≤ –Ω–∞ 20 –≤–æ–ø—Ä–æ—Å–æ–≤, —Ç—ã –ø–æ–ª—É—á–∏—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ –≤—ã—è–≤–ª–µ–Ω–∏—é "
                                           "—Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–∏ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ç–∏–ø–∞–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–π", reply_markup=markup)
    user_state = reset(message.from_user.id)
    question(message.from_user.id, user_state.ind)

@bot.message_handler(content_types=['text'])
def get_text_messages(message):
    user_id = message.from_user.id
    if user_id not in cache:
        reset(user_id)
    user_state = cache[user_id]
    if user_state.ind < len(test):
        res(user_id, message.text)
        user_state.ind += 1
    if user_state.ind < len(test):
        question(user_id, user_state.ind)
    else:
        result_text = print_result(user_id)
        bot.send_message(user_id, result_text)
        bot.send_message(user_id, "" + test_res[0] + test_res[1] + test_res[2] + test_res[3] + test_res[4])
        reset(user_id)

###############################################

def question(chat_id, i):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    btn1 = types.KeyboardButton('–∞')
    btn2 = types.KeyboardButton('–±')
    markup.add(btn1, btn2)

    bot.send_message(chat_id, test[i], reply_markup=markup)

def print_result(user_id):
    user_state = cache[user_id]
    # —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö

    str = """–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 
    –ß–µ–ª–æ–≤–µ–∫-–ü—Ä–∏—Ä–æ–¥–∞:               {:d}%
    –ß–µ–ª–æ–≤–µ–∫-–¢–µ—Ö–Ω–∏–∫–∞:               {:d}%
    –ß–µ–ª–æ–≤–µ–∫-–ß–µ–ª–æ–≤–µ–∫:               {:d}%
    –ß–µ–ª–æ–≤–µ–∫-–ó–Ω–∞–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:      {:d}%
    –ß–µ–ª–æ–≤–µ–∫-–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑:  {:d}%
    """.format(round(user_state.nature * 100 / CATEGORY_MAX),
               round(user_state.tech * 100 / CATEGORY_MAX),
               round(user_state.human * 100 / CATEGORY_MAX),
               round(user_state.sign * 100 / CATEGORY_MAX),
               round(user_state.art * 100 / CATEGORY_MAX))
    print(str)
    return str

def reset(user_id):
    cache[user_id] = UserState()
    return cache[user_id]

def res(user_id, resp):
    user_state = cache[user_id]
    user_state.user_answers.append(resp)
    print(user_id, user_state.user_answers)
    num = user_state.ind + 1
    if (num == 1 and resp == '–∞') \
            or (num == 3 and resp == '–±') \
            or (num == 6 and resp == '–∞') \
            or (num == 10 and resp == '–∞') \
            or (num == 11 and resp == '–∞') \
            or (num == 13 and resp == '–±') \
            or (num == 16 and resp == '–∞') \
            or (num == 20 and resp == '–∞'):
        user_state.nature += 1
    if (num == 1 and resp == '–±') \
            or (num == 4 and resp == '–∞') \
            or (num == 7 and resp == '–±') \
            or (num == 9 and resp == '–∞') \
            or (num == 11 and resp == '–±') \
            or (num == 14 and resp == '–∞') \
            or (num == 17 and resp == '–±') \
            or (num == 19 and resp == '–∞'):
        user_state.tech += 1
    if (num == 2 and resp == '–∞') \
            or (num == 4 and resp == '–±') \
            or (num == 6 and resp == '–±') \
            or (num == 8 and resp == '–∞') \
            or (num == 12 and resp == '–∞') \
            or (num == 14 and resp == '–±') \
            or (num == 16 and resp == '–±') \
            or (num == 18 and resp == '–∞'):
        user_state.human += 1
    if (num == 2 and resp == '–±') \
            or (num == 5 and resp == '–∞') \
            or (num == 9 and resp == '–±') \
            or (num == 10 and resp == '–±') \
            or (num == 12 and resp == '–±') \
            or (num == 15 and resp == '–∞') \
            or (num == 19 and resp == '–±') \
            or (num == 20 and resp == '–±'):
        user_state.sign += 1
    if (num == 3 and resp == '–∞') \
            or (num == 5 and resp == '–±') \
            or (num == 7 and resp == '–∞') \
            or (num == 8 and resp == '–±') \
            or (num == 13 and resp == '–∞') \
            or (num == 15 and resp == '–±') \
            or (num == 17 and resp == '–∞') \
            or (num == 18 and resp == '–±'):
        user_state.art += 1


bot.polling(none_stop=True)
